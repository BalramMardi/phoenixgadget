# IMF Gadget API

This is a RESTful API to manage gadgets for the Impossible Missions Force (IMF).  
The API supports user authentication and CRUD operations on gadgets, including filtering by status and triggering special actions like self-destruct.

---

## Features

- User Registration and Login (JWT based authentication)
- Add, Update, and Decommission Gadgets
- Filter gadgets by status (Available, Deployed, Destroyed, Decommissioned)
- Trigger gadget self-destruct sequence (with confirmation code)
- Mission success probability attached to each gadget dynamically

---

## Technologies Used

- Node.js with Express.js
- MongoDB with Mongoose
- JSON Web Tokens (JWT) for authentication

---

## Setup

1. Clone the repo:

```bash
   git clone https://github.com/BalramMardi/phoenixgadget.git
   cd phoenixgadget
```

2. Install dependencies:

```bash
   npm install
```

3.Create a .env file with the following variables:

```js
PORT = 3000;
MONGO_URI = your_mongodb_connection_string;
JWT_SECRET = your_jwt_secret_key;
```

4.Start the server:

```bash
    npm start
```

## Important Links

### Postman Link -

[API Documentation](https://documenter.getpostman.com/view/30181067/2sB2qWFP9H)

**_note_** - For more details on how the api works, please go through this link.

## Authentication (Register & Login)

1. ### Register a new user

   #### Endpoint: POST /auth/register

   Body (JSON):

   ```json
   {
     "username": "your_username",
     "email": "your_email@example.com",
     "password": "your_password"
   }
   ```

   #### Response:

   User object (without password) and status 201 on success.

2. ### Login

   Endpoint: POST /auth/login

   Body (JSON):

   ```json
   {
     "email": "your_email@example.com",
     "password": "your_password"
   }
   ```

   #### Response:

   JWT token to use for authenticated requests.

   #### Using the JWT Token

   After logging in, copy the token from the response and add it to the headers of all protected routes:

   Authorization: Bearer YOUR_JWT_TOKEN_HERE

## Gadgets API

All gadget endpoints require authentication.

1. ### Get all gadgets

   Endpoint: GET /gadgets

   #### Optional query parameter:

   status to filter by gadget status
   Example: /gadgets?status=Available

   #### Headers: Include Authorization header with JWT token

   #### Response:

   List of gadgets with a random "mission success probability" added.

2. ### Add a new gadget

   Endpoint: POST /gadgets

   #### Headers:

   Include Authorization header with JWT token

   Body: Empty or {} (the codename is auto-generated)

   #### Response:

   The newly created gadget with autogenerated codename and default status.

3. ### Update a gadget

   Endpoint: PATCH /gadgets/:id

   #### Headers:

   Include Authorization header with JWT token

   Body (JSON): Fields to update, e.g.

   ```json
   {
     "status": "Deployed",
     "name": "New Gadget Name"
   }
   ```

   #### Response:

   The updated gadget object.

4. ### Decommission (soft delete) a gadget

   Endpoint: DELETE /gadgets/:id

   #### Headers:

   Include Authorization header with JWT token

   #### Response:

   Confirmation message with the gadget marked as "Decommissioned" and timestamped.

5. ### Trigger self-destruct sequence

   Endpoint: POST /gadgets/:id/self-destruct

   #### Headers:

   Include Authorization header with JWT token

   #### Response:

   Confirmation message with a randomly generated self-destruct confirmation code.

## Testing with Postman

Import the provided Postman collection (IMF-Gadget-API.postman_collection.json) to test all endpoints easily. Make sure to login first and set the Authorization header for the gadget routes.

## License

This project is licensed under the MIT License.

## Author

[Balram Mardi](https://github.com/BalramMardi)
